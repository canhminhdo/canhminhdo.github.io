<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="google652b6e851dbdf40b.html"> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Phân tích hình thái (Morphological Analysis) trong xử lý ngôn ngữ tự nhiên | Canh Minh Do</title> <meta name="author" content="Canh Minh Do"> <meta name="description" content="Computer Science, Software Engineering, Formal Methods. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.ico"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://canhminhdo.github.io/blog/2020/morphological-analysis-of-word/"> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Canh </span>Minh Do</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item "> <a class="nav-link" href="/profile/">Profile</a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">Teaching</a> </li> <li class="nav-item "> <a class="nav-link" href="/research/">Research</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/news/">News</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Phân tích hình thái (Morphological Analysis) trong xử lý ngôn ngữ tự nhiên</h1> <p class="post-meta">June 22, 2020</p> <p class="post-tags"> <a href="/blog/2020"> <i class="fas fa-calendar fa-sm"></i> 2020 </a>   ·   <a href="/blog/tag/python"> <i class="fas fa-hashtag fa-sm"></i> Python</a>     ·   <a href="/blog/category/nlp"> <i class="fas fa-tag fa-sm"></i> NLP</a>   <a href="/blog/category/morphological-analysis"> <i class="fas fa-tag fa-sm"></i> Morphological Analysis</a>   </p> </header> <article class="post-content"> <div id="markdown-content" style="text-align: justify;"> <p><strong>Phân tích hình thái (Morphological Analysis)</strong> là một quá trình xử lý để cung cấp thông tin về từ trong một câu. Đây được coi là bước xử lý đầu tiên trong xử lý ngôn ngữ tự nhiên. Đối với tiếng anh chúng ta có những khâu như sau:</p> <ul> <li>chia một từ thành morphemes. Ví dụ: unkindly = un + kind * ly</li> <li>quyết định parts-of-speech của từ (POS tagging)</li> </ul> <p>Một từ có thể có nhiều POSs, việc chọn đúng POSs cho từng từ là quan trọng để làm đầu vào cho bước tiếp theo <strong>phân tích cú pháp (Syntatic Analysis)</strong> trong NLP.</p> <p>Trong bài viết này, chúng ta sẽ đề cập tới phương pháp sử dụng <strong>word dictionary</strong> để POSs các từ trong một câu. Đầu vào của chúng ta sẽ gồm có 2 thành phần quan trọng:</p> <ul> <li>Từ điển chứa các word cùng với POSs của các word.</li> <li>Bảng kết nối (Connection Table) chứa thông tin các POSs kết nối với nhau như thế nào</li> </ul> <p>Cho một câu, với từ điển và bảng kết nối, chúng ta cần tạo một <strong>word lattice</strong> cho câu đầu vào. Word lattice là một đồ thị của việc phân tích hình thái học. Mỗi node sẽ chứa một từ và POS của nó. Trong khi đó cạnh kết nối giữa các node được quyết định từ bảng kết nối. Khi xây dựng word lattice, chúng ta sẽ có một đồ thị có hướng và có thể tồn tại nhiều path từ điểm bắt đầu tới điểm kết thúc. Có nghĩa rằng một từ có thể POS tagging theo nhiều cách, việc này khiến chúng ta phải suy nghĩ rằng. Path nào trong word lattice là chính xác nhất so với những path còn lại trong đồ thị. Để trả lời câu hỏi này, chúng ta sẽ tìm hiểu thuật toán Viterbi trong bày tiếp theo. Dưới đây là chương trình cài đặt cách xây dựng word lattice, từ đó biết được những POS tagging cho một câu đưa vào. Quá trình thực hiện thuật toán chỉ phụ thuộc vào từ điển và bảng kết nối ban đầu.</p> <p>Đầu ra mong muốn của phân tích hình thái (Morphological Analysis) là một POSs tagging của các từ trong một câu.</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c1">#!/usr/bin/env python
# coding: utf-8
</span>
<span class="c1"># # Word Boundary
</span>
<span class="c1"># In[87]:
</span>

<span class="kn">import</span> <span class="n">math</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">from</span> <span class="n">graphviz</span> <span class="kn">import</span> <span class="n">Digraph</span>


<span class="c1"># In[88]:
</span>

<span class="n">START</span> <span class="o">=</span> <span class="sh">'</span><span class="s">START</span><span class="sh">'</span>
<span class="n">END</span> <span class="o">=</span> <span class="sh">'</span><span class="s">END</span><span class="sh">'</span>
<span class="n">CN</span> <span class="o">=</span> <span class="sh">'</span><span class="s">CN</span><span class="sh">'</span>
<span class="n">FN</span> <span class="o">=</span> <span class="sh">'</span><span class="s">FN</span><span class="sh">'</span>
<span class="n">V_1</span> <span class="o">=</span> <span class="sh">'</span><span class="s">V-1</span><span class="sh">'</span>
<span class="n">V_RA</span> <span class="o">=</span> <span class="sh">'</span><span class="s">V-ra</span><span class="sh">'</span>
<span class="n">V_WA</span> <span class="o">=</span> <span class="sh">'</span><span class="s">V-wa</span><span class="sh">'</span>
<span class="n">ADN</span> <span class="o">=</span> <span class="sh">'</span><span class="s">AdN</span><span class="sh">'</span>
<span class="n">AUX_V</span> <span class="o">=</span> <span class="sh">'</span><span class="s">Aux-V</span><span class="sh">'</span>
<span class="n">CASE_P</span> <span class="o">=</span> <span class="sh">'</span><span class="s">Case-P</span><span class="sh">'</span>
<span class="n">CONJ_P</span> <span class="o">=</span> <span class="sh">'</span><span class="s">Conj-P</span><span class="sh">'</span>
<span class="n">EN</span> <span class="o">=</span> <span class="sh">'</span><span class="s">EN</span><span class="sh">'</span>
<span class="n">SUF</span> <span class="o">=</span> <span class="sh">'</span><span class="s">Suf</span><span class="sh">'</span>

<span class="n">vocabs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">'</span><span class="s">こ</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="n">SUF</span><span class="p">],</span>
    <span class="sh">'</span><span class="s">こと</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="n">FN</span><span class="p">],</span>
    <span class="sh">'</span><span class="s">この</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="n">ADN</span><span class="p">],</span>
    <span class="sh">'</span><span class="s">た</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="n">AUX_V</span><span class="p">],</span>
    <span class="sh">'</span><span class="s">で</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="n">CASE_P</span><span class="p">,</span> <span class="n">V_1</span><span class="p">],</span>
    <span class="sh">'</span><span class="s">と</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="n">CASE_P</span><span class="p">,</span> <span class="n">CONJ_P</span><span class="p">],</span>
    <span class="sh">'</span><span class="s">な</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="n">V_RA</span><span class="p">],</span>
    <span class="sh">'</span><span class="s">に</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="n">CASE_P</span><span class="p">],</span>
    <span class="sh">'</span><span class="s">にな</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="n">V_WA</span><span class="p">],</span>
    <span class="sh">'</span><span class="s">ひ</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="n">CN</span><span class="p">],</span>
    <span class="sh">'</span><span class="s">ひと</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="n">CN</span><span class="p">],</span>
    <span class="sh">'</span><span class="s">ひとこと</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="n">CN</span><span class="p">],</span>
    <span class="sh">'</span><span class="s">っ</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="n">EN</span><span class="p">],</span>
    <span class="sh">'</span><span class="s">元気</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="n">CN</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">indices</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">START</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">END</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">CN</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">FN</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">V_1</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">V_RA</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="n">V_WA</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">ADN</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
    <span class="n">AUX_V</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
    <span class="n">CASE_P</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="n">CONJ_P</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
    <span class="n">EN</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="n">SUF</span><span class="p">:</span> <span class="mi">11</span>
<span class="p">}</span>

<span class="n">conn_rules</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="c1"># START
</span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="c1"># CN
</span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="c1"># FN
</span>    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="c1"># V-1
</span>    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="c1"># V-ra
</span>    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="c1"># V-wa
</span>    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="c1"># AdN
</span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="c1"># Aux-V
</span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="c1"># Case-P
</span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="c1"># Conj-P    
</span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="c1"># EN
</span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>  <span class="c1"># Suf
</span><span class="p">])</span>


<span class="c1"># In[89]:
</span>

<span class="k">def</span> <span class="nf">getLengthInfo</span><span class="p">():</span>
    <span class="nb">min</span> <span class="o">=</span> <span class="n">math</span><span class="p">.</span><span class="n">inf</span>
    <span class="nb">max</span> <span class="o">=</span> <span class="o">-</span><span class="n">math</span><span class="p">.</span><span class="n">inf</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">vocabs</span><span class="p">.</span><span class="nf">keys</span><span class="p">():</span>
        <span class="nb">min</span> <span class="o">=</span> <span class="nb">min</span> <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">min</span> <span class="k">else</span> <span class="nf">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
        <span class="nb">max</span> <span class="o">=</span> <span class="nb">max</span> <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">max</span> <span class="k">else</span> <span class="nf">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
    <span class="nf">return </span><span class="p">(</span><span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">)</span>

<span class="nb">min</span><span class="p">,</span> <span class="nb">max</span> <span class="o">=</span> <span class="nf">getLengthInfo</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Node</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">parent</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">self</span><span class="p">.</span><span class="n">childs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">val</span> <span class="o">=</span> <span class="n">val</span>
        <span class="n">self</span><span class="p">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span>
        
    <span class="k">def</span> <span class="nf">addChild</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">childs</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
        <span class="n">child</span><span class="p">.</span><span class="nf">setParent</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">child</span>
    
    <span class="k">def</span> <span class="nf">isEndNode</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">val</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">self</span><span class="p">.</span><span class="n">pos</span> <span class="o">==</span> <span class="n">END</span>
    
    <span class="k">def</span> <span class="nf">isStartNode</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">return </span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">parent</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">self</span><span class="p">.</span><span class="n">val</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">self</span><span class="p">.</span><span class="n">pos</span> <span class="o">==</span> <span class="n">START</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">setParent</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
    
    <span class="k">def</span> <span class="nf">getChilds</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">childs</span>
    
    <span class="k">def</span> <span class="nf">getParent</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">parent</span>
    
    <span class="k">def</span> <span class="nf">getVal</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">val</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="sh">''</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">val</span>
    
    <span class="k">def</span> <span class="nf">getPos</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">pos</span>
    
    <span class="k">def</span> <span class="nf">getId</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>    
        <span class="nb">id</span> <span class="o">=</span> <span class="nf">str</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">val</span><span class="p">)</span> <span class="o">+</span> <span class="sh">'</span><span class="s">-</span><span class="sh">'</span> <span class="o">+</span> <span class="nf">str</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">pos</span><span class="p">)</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">parent</span>
        <span class="k">while</span> <span class="n">node</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="nb">id</span> <span class="o">+=</span> <span class="nf">str</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="nf">getVal</span><span class="p">())[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="nf">getParent</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">id</span>
    
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">val</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">pos</span>
        <span class="k">return</span> <span class="sh">'</span><span class="s">%s</span><span class="se">\n</span><span class="s">%s</span><span class="sh">'</span> <span class="o">%</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">val</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">pos</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">buildTree</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
    <span class="n">prevPos</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="nf">getPos</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">text</span> <span class="o">==</span> <span class="sh">''</span> <span class="ow">and</span> <span class="n">conn_rules</span><span class="p">[</span><span class="n">indices</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">prevPos</span><span class="p">),</span> <span class="n">indices</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">END</span><span class="p">)]:</span>
        <span class="n">childNode</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="nf">addChild</span><span class="p">(</span><span class="nc">Node</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">END</span><span class="p">))</span>
        <span class="nf">writeToDotFile</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">childNode</span><span class="p">)</span>
        <span class="k">return</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="nb">min</span><span class="p">,</span> <span class="nb">max</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="nf">len</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">text</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span>
            <span class="n">remainingText</span> <span class="o">=</span> <span class="n">text</span><span class="p">[</span><span class="n">i</span><span class="p">:]</span>
            <span class="n">poses</span> <span class="o">=</span> <span class="n">vocabs</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="n">poses</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">conn_rules</span><span class="p">[</span><span class="n">indices</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">prevPos</span><span class="p">),</span> <span class="n">indices</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">pos</span><span class="p">)]:</span>
                    <span class="n">childNode</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="nf">addChild</span><span class="p">(</span><span class="nc">Node</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">pos</span><span class="p">))</span>
                    <span class="nf">writeToDotFile</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">childNode</span><span class="p">)</span>
                    <span class="nf">buildTree</span><span class="p">(</span><span class="n">childNode</span><span class="p">,</span> <span class="n">remainingText</span><span class="p">)</span>

<span class="n">root</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">START</span><span class="p">)</span>
<span class="n">dot</span> <span class="o">=</span> <span class="nc">Digraph</span><span class="p">(</span><span class="n">comment</span><span class="o">=</span><span class="sh">'</span><span class="s">Word Boundary</span><span class="sh">'</span><span class="p">)</span>
<span class="n">dot</span><span class="p">.</span><span class="nf">node</span><span class="p">(</span><span class="nf">str</span><span class="p">(</span><span class="n">root</span><span class="p">.</span><span class="nf">getId</span><span class="p">()),</span> <span class="nf">str</span><span class="p">(</span><span class="n">root</span><span class="p">))</span>
<span class="n">nodeSet</span> <span class="o">=</span> <span class="nf">set</span><span class="p">()</span>
<span class="n">edgeSet</span> <span class="o">=</span> <span class="nf">set</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">writeToDotFile</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">childNode</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">dot</span><span class="p">,</span> <span class="n">nodeSet</span><span class="p">,</span> <span class="n">edgeSet</span>
    <span class="n">childNodeId</span> <span class="o">=</span> <span class="nf">str</span><span class="p">(</span><span class="n">childNode</span><span class="p">.</span><span class="nf">getId</span><span class="p">())</span>
    <span class="n">nodeId</span> <span class="o">=</span> <span class="nf">str</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="nf">getId</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">childNodeId</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nodeSet</span><span class="p">:</span>
        <span class="n">dot</span><span class="p">.</span><span class="nf">node</span><span class="p">(</span><span class="n">childNodeId</span><span class="p">,</span> <span class="nf">str</span><span class="p">(</span><span class="n">childNode</span><span class="p">))</span>
        <span class="n">nodeSet</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="n">childNodeId</span><span class="p">)</span>
        
    <span class="nf">if </span><span class="p">(</span><span class="n">nodeId</span><span class="p">,</span> <span class="n">childNodeId</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">edgeSet</span><span class="p">:</span>
        <span class="n">dot</span><span class="p">.</span><span class="nf">edge</span><span class="p">(</span><span class="n">nodeId</span><span class="p">,</span> <span class="n">childNodeId</span><span class="p">)</span>
        <span class="n">edgeSet</span><span class="p">.</span><span class="nf">add</span><span class="p">((</span><span class="n">nodeId</span><span class="p">,</span> <span class="n">childNodeId</span><span class="p">))</span>

<span class="n">text</span> <span class="o">=</span> <span class="sh">'</span><span class="s">このひとことで元気になった</span><span class="sh">'</span>
<span class="nf">buildTree</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>


<span class="c1"># In[90]:
</span>

<span class="n">dot</span></code></pre></figure> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/lvalues-and-rvalues-in-c++/">Lvalues and Rvalues in C++</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2021/C++-static-library-va-dynamic-library/">C++ static library và dynamic library</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2021/nhung-luu-y-khi-viet-code-de-chuong-trinh-tro-len-sang-sua-va-mach-lac/">Những lưu ý khi viết code để chương trình trở lên sáng sủa và mạch lạc</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2021/ban-that-su-da-biet-ve-bit-shifting/">Bạn thật sự đã biết về Bit shifting</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2021/hash-tables/">Hash tables</a> </li> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0 text-center"> © Copyright 2024 Canh Minh Do. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-163449648-1"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-163449648-1");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>