<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="google652b6e851dbdf40b.html"> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Những lưu ý khi viết code để chương trình trở lên sáng sủa và mạch lạc | Canh Minh Do</title> <meta name="author" content="Canh Minh Do"> <meta name="description" content="Computer Science, Software Engineering, Formal Methods. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/bio-photo@48x48.jpg"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://canhminhdo.github.io/blog/2021/nhung-luu-y-khi-viet-code-de-chuong-trinh-tro-len-sang-sua-va-mach-lac/"> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Canh </span>Minh Do</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item "> <a class="nav-link" href="/profile/">Profile</a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">Teaching</a> </li> <li class="nav-item "> <a class="nav-link" href="/research/">Research</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/news/">News</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Những lưu ý khi viết code để chương trình trở lên sáng sủa và mạch lạc</h1> <p class="post-meta">March 11, 2021</p> <p class="post-tags"> <a href="/blog/2021"> <i class="fas fa-calendar fa-sm"></i> 2021 </a>   ·   <a href="/blog/category/code-style"> <i class="fas fa-tag fa-sm"></i> Code Style</a>   </p> </header> <article class="post-content"> <div id="markdown-content" style="text-align: justify;"> <p>Việc viết code không những để cho máy tính đọc mà cũng cho lập trình viên đọc code của bạn. Chính vì vậy việc viết code một cách có cấu trúc, dễ đọc không những giúp bạn có thể quản lý mã nguồn và lỗi tốt mà còn dễ dàng sửa đổi. Sau đây chúng ta cùng xem một vài lưu ý khi viết chương của mình.</p> <p><strong>1. Names</strong></p> <p><strong>Use descriptive names for globals, short names for locals</strong><br> Tên có thể là của variables hay functions, bạn nên đặt tên có chứa thông tin, ngắn gọn, dễ nhớ và có thể phát âm được nếu có thể. Thường sẽ đặt tên theo tiếng anh vì vậy nên chú ý điểm này. Có thể mô tả cho globals với một tên dài để gợi nhớ cho bạn khi viết code. Nhưng hãy dùng tên ngắn cho locals. Vì trong một function, bạn có thể dùng một tên ngắn là đủ, ví dụ như sử dụng <strong>n</strong> là đủ, <strong>npoints</strong> là tốt, <strong>numberOfPoints</strong> là quá mức. Bạn thường được khuyến khích đặt tên dài bất chấp trong các hoàn cảnh nào, đó là một sai lầm vì sự rõ ràng thường sử dụng ngắn gọn.</p> <pre><code class="language-C++">for (theElementIndex = 0; theElementIndex &lt; numberOfElements; theElementIndex++)
    elementArray[theElementIndex] = theElementIndex;

for (i = 0; i &lt; nelems; i++)
    elem[i] = i;
</code></pre> <p>Hằng số (<strong>CONSTANT</strong>) thường đặt tên với tất cả chữ HOA, còn <strong>Globals</strong> thì bắt đầu bằng chữ Hoa.</p> <p><strong>Be consistent</strong><br> Bên cạnh tránh viết tên quá dài, việc chú ý đến context trong scope đó. Như ví dụ sau, khi không cần phải đề cập tên với Queue vì tên của class đã đề cập về điều đó.</p> <pre><code class="language-Java">class UserQueue {
    int noOfItemsInQ, frontOfTheQueue, queueCapacity;
    public int numOfUsersInQueue();
}
queue.queueCapacity

class UserQueue {
    int nItems, front, capacity;
    public int nUsers();
}
queue.capacity;
</code></pre> <p><strong>Use active names for functions</strong><br> Tên của function nên sử dụng active verbs, có thể theo sau là nouns, ví dụ như là <strong>getTime()</strong> Nếu hàm trả về true or false thì nên đặt tên như là <strong>isOctal()</strong> không phải <strong>checkOctal()</strong>.</p> <p><strong>Be accurate</strong><br> Tên của hàm hoặc biến phải phản ánh đúng những gì chức năng của hàm và biến đó thể hiện.</p> <p><strong>2. Expressions and Statements</strong></p> <p><strong>Indent to show structure</strong><br> Việc dùng indentation một cách nhất quán là mức thấp nhất để chương trình trở lên có cấu trúc</p> <p><strong>Use the natural form for expressions</strong><br> Sử dụng những expressions mà bạn có thể đọc chúng lớn được.</p> <p><strong>Parenthesize to resolve ambiguity</strong><br> Các toán tử có thể có độ ưu tiên khác nhau nên việc sử dụng dấu ngoặc đơn sẽ tránh được sự nhập nhằng trong biểu thức mà bạn không chắc chắn thứ tự thực hiện của các toán tử.</p> <p><strong>Break up complex expressions</strong><br> Nếu một expressions chứa quá nhiều toán tử và phức tạp thì bạn nên chuyển thành những đoạn code đơn giản hơn mặc dù nó sẽ không được ngắn gọn, nhưng sẽ cho người đọc đoạn code đó dễ hiểu hơn.</p> <p><strong>Be clear</strong><br> Mục tiêu nên là viết code thật sáng sủa, dễ hiểu, chứ không phải viết code thể hiện mình là thông minh.</p> <p><strong>Be careful with side effects</strong><br> Những toán tử như là ++, – có side effect, bên cạnh trả về giá trị của biến còn thay đổi giá trị của biến đó. Thứ tự của việc thay đổi giá trị của biến và giá trị trả về sẽ ảnh hưởng tới kết quả của biểu thức.</p> <p><strong>3. Consistency and Idioms</strong></p> <p><strong>Use a consistent indentation and brace style</strong><br> Mỗi người sẽ có một thói quen sử dụng indentation và brace khác nhau, nhưng quan trọng hơn hết là khi đã sử dụng thì phải sử dụng nó một cách nhất quán.</p> <p><strong>Use idioms for consistency</strong><br> Để tạo được sự thống nhất trong cách viết code, chúng ta có thể sử dụng những đoạn code được sử dụng phổ biến trong các tài liệu cũng như thực tế.</p> <pre><code class="language-C++">for (i = 0; i &lt; n; i ++)
    array[i] = 1;

for (p = list; p != NULL; p = p-&gt;next) {}

for (;;) {} // prefer than while(1)

while ((c = getchar()) != EOF)
    putchar(c);

p = malloc(strlen(buf) + 1);
strcpy(p, buf);
</code></pre> <p><strong>Use else-ifs for multi-way decisions</strong><br> Cách bạn thay đổi thứ tự trong các điều kiện của if-else có thể tạo đoạn code sáng sủa hơn.</p> <p><strong>4 Function Macros</strong></p> <p>Macros được sử dụng để tránh overhead của việc gọi tới các function, đây có thể là một lý do để bạn có thể cân nhắc việc sử dụng Macros. Tuy nhiên với máy tính có hiệu năng thấp thì việc gọi function có thể expensive, nhưng với khả năng của những máy tính hiện tại thì nó là không cần thiết.</p> <p><strong>Avoid function macros</strong><br> Việc sử dụng macros có thể dẫn tới những bug rất khó thấy ví dụ sau</p> <pre><code class="language-C++">#define isupper(c) ((c) &gt;= 'A' &amp;&amp; (c) &lt;= 'Z')
while (isupper(c = getchar()))
</code></pre> <p>Có thể thấy rằng c xuất hiện hai lần trong biểu thức của macro và việc gọi ở câu lệnh thứ hai có thể dẫn tới việc biểu thức được chạy hai lần và gây ra side effect.</p> <p><strong>Parenthesize the macro body and arguments</strong><br> Để tránh thứ tự ưu tiên trong biểu thức bị thay đổi khi sử dụng macros.</p> <p><strong>5 Magic Numbers</strong></p> <p><strong>Give name to magic numbers</strong><br> Việc sử dụng những số khác 0 hoặc 1 trong code sẽ làm cho người đọc khó hiểu, vì vậy hãy sử dụng tên để gán cho những số đang sử dụng.</p> <pre><code class="language-C++">enum {
    MINROW = 1,
    MINCOL = 1,
    MAXROW = 24,
    MAXCOL = 80
}
</code></pre> <p><strong>Define numbers as constants, not macros</strong><br> Trong lập trình C bạn thường sử dụng <strong>#define</strong> cho các magic numbers. Tuy nhiên nó là điều không nên khi macros sẽ thay đổi lexical structure của chương trình, vì vậy nên sử dụng theo một cách phù hợp hơn bằng hằng số.</p> <p><strong>Use character constants, not integers</strong></p> <pre><code class="language-C++">if (c &gt;= 65 &amp;&amp; c &lt;= 90) {} // should not
if (c &gt;= 'A' &amp;&amp; c &lt;= 'Z') {}

name[i] = 0; // should not
name[i] = '\0';
</code></pre> <hr> <p><strong>Use the language to calculate the size of an object</strong><br> Ví dụ nên sử dụng sizeof(int) thay vì 2 hoặc 3.</p> <p><strong>6 Comments</strong></p> <p><strong>Don’t belabor the obvious</strong><br> Cách sử dụng tên hàm, tên biến và các vòng lặp có thể cho thấy được ý định của đoạn code bạn muốn viết. Vì vậy không nên lạm dụng comments những đoạn code có thể hiểu được dễ dàng.</p> <p><strong>Comment functions and global data</strong><br> Việc comment cho functions có thể giúp người đọc nhanh chóng biết được nhiệm vụ của function đó, giá trị trả về. Comment cho global data sẽ giúp ta gợi nhớ lại mục đích của nó trong toàn bộ chương trình.</p> <p><strong>Don’t comment bad code, rewrite it</strong><br> Nếu phải comments mọi thứ thì đoạn code đó chắc chắn cần phải thay đổi.</p> <p><strong>Don’t contradict the code</strong><br> Tránh việc code và comments không thể hiện giống nhau. Hay xảy ra khi việc bạn thay đổi function đó và quên không cập nhật comments trước đó.</p> <p><strong>Clarify, don’t confuse</strong><br> Comments là giúp người đọc dễ hiểu hơn cho đoạn code khó. Vì vậy tránh tạo thêm rào cản cho người đọc bằng những comments có thể làm cho người đọc hiểu nhầm.</p> <p>Tóm lại, nếu code được viết một cách sáng sủa, mạch lạc và có cấu trúc sẽ giúp bạn quản lý code tốt hơn và tránh sai sót, trong khi đó cũng giúp người khác có thể hiểu code của bạn dễ dàng hơn. Đây có thể coi như là một thói quen khi bạn viết code, vì vậy hãy tập cho mình có một thói quen tốt ngay từ bây giờ.</p> <p><strong>Reference:</strong> The Practice of Programming, Brian Kernighan and Rob Pike.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/lvalues-and-rvalues-in-c++/">Lvalues and Rvalues in C++</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2021/C++-static-library-va-dynamic-library/">C++ static library và dynamic library</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2021/ban-that-su-da-biet-ve-bit-shifting/">Bạn thật sự đã biết về Bit shifting</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2021/hash-tables/">Hash tables</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2021/cach-bieu-dien-so-am-trong-trong-may-tinh/">Cách biểu diễn số âm trong máy tính</a> </li> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0 text-center"> © Copyright 2024 Canh Minh Do. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-163449648-1"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-163449648-1");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>